<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="sk" dir="ltr">
  
<!-- Mirrored from www.drupal.sk/node/984 by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 05 Jan 2017 18:32:14 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Nastavenie hesla v Drupal 7 vs. neznáme aktuálne heslo | Drupal.SK</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../../files/arthemia_favicon/index.png" type="image/x-icon" />
    <link type="text/css" rel="stylesheet" media="all" href="../../modules/book/book/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../../modules/node/node/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../../modules/poll/poll/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../../modules/system/defaults/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../../modules/system/system/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../../modules/system/system-menus/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../../modules/user/user/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../../sites/all/modules/cck/theme/content-module/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../../sites/all/modules/ckeditor/ckeditor/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../../sites/all/modules/logintoboggan/logintoboggan/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../../sites/all/modules/mail/simplenews/simplenews/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../../sites/all/modules/texy/lib/fshl/styles/COHEN_style/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../../modules/forum/forum/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../../sites/all/modules/views/css/views/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../../modules/comment/comment/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../../sites/all/themes/arthemia/style/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../../sites/all/themes/arthemia/ribbon/index.css?9" />
<link type="text/css" rel="stylesheet" media="all" href="../../sites/all/themes/arthemia/aggregator/index.css?9" />
    <script type="text/javascript" src="../../files/js/js_962198f8f646c6ac6b044eb622803996/index.js"></script>
<script type="text/javascript">
<!--//--><![CDATA[//><!--
jQuery.extend(Drupal.settings, { "basePath": "/", "googleanalytics": { "trackOutbound": 1, "trackMailto": 1, "trackDownload": 1, "trackDownloadExtensions": "7z|aac|avi|csv|doc|exe|flv|gif|gz|jpe?g|js|mp(3|4|e?g)|mov|pdf|phps|png|ppt|rar|sit|tar|torrent|txt|wma|wmv|xls|xml|zip" } });
//--><!]]>
</script>
<script type="text/javascript">
<!--//--><![CDATA[//><!--
(function(i,s,o,g,r,a,m){i["GoogleAnalyticsObject"]=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,"script","http://www.google-analytics.com/analytics.js","ga");ga("create", "UA-11573462-1", { "cookieDomain": "auto" });ga("set", "anonymizeIp", true);ga("send", "pageview");
//--><!]]>
</script>
  </head>
  <body>
    <div id="head" class="clearfloat">

      <div class="clearfloat">
        <div id="logo">
          <a href="../../index/index.html" title="Drupal.SK"><img src="../../files/logo/index.jpg" alt="Drupal.SK" /></a>                </div>

              </div>

      <div id="navbar" class="clearfloat">
          <div id="page-bar"><ul class="menu"><li class="leaf first"><a href="../../blog/index.html">Blogy</a></li>
<li class="leaf"><a href="../../forum/index.html">Fórum</a></li>
<li class="collapsed"><a href="../../prirucky/index.html" title="Naučte sa s nami Drupal">Príručky</a></li>
<li class="leaf"><a href="../../stahuj/index.html">Sťahuj</a></li>
<li class="leaf"><a href="../../komunita/index.html">Komunita</a></li>
<li class="leaf last"><a href="../../aggregator/index.html" title="">Zo sveta</a></li>
</ul></div>              </div>
    </div>

    <div id="page" class="clearfloat">

            
      
      <div id="content" class="main-content with-sidebar">
        
        <div class="breadcrumb"><a href="../../index/index.html">Domov</a> &rsaquo; <a href="../../blog/index.html">Blogy</a> &rsaquo; <a href="../../blog/568/index.html">Blog používateľa borgo </a></div>                        <h1>Nastavenie hesla v Drupal 7 vs. neznáme aktuálne heslo</h1>                                        <div id="node-984" class="node clear-block">



      <span class="submitted">19 máj, 2011 - 10:11 poslal <a href="../../user/568/index.html" title="Zobraziť profil používateľa">borgo</a></span>
  
  <div class="content">
    
<p>Pokiaľ máte pri registrácii nových používateľov v nastaveniach
(admin/config/pe­ople/accounts) zapnuté “Požadovať overenie e-mailom keď
návštevník vytvorí účet”, nie je na stránke registrácie
(user/register) k dispozícii možnosť nastaviť si vlastné heslo.</p>

<p>Používateľ tak zadá len svoje meno a e-mail, na ktorý je mu zaslaná
potvrdzovacia správa. V nej je inštruovaný, aby klikol na jednorázový
prihlasovací odkaz a je presmerovaný na stránku už ako prihlásený. Prvá
sa mu vtedy načíta stránka s výzvou, aby si zmenil heslo. A tu nastáva
možný problém.</p>

<p>Drupal 7 zaviedol pri zmene hesla povinnosť zadať aj heslo
<em>Aktuálne</em>. Vždy, okrem popisovaného momentu, teda ak ho systém
prihlasuje cez jednorázový odkaz z e-mailu (GET parameter pass-reset-token
v URL). Vtedy totiž používateľ nepozná svoje aktuálne heslo (keďže mu
ho vygeneroval systém na pozadí) a povinnosť ho zadať výnimočne Drupal
vypustí.</p>

<p>Čo ak to ale používateľ v záchvate nezodpovednosti v tomto momente
neurobí a povedzme klikne na iný odkaz. Následná návšteva stránky
s nastavením hesla (user/*/edit) už od neho aktuálne heslo chce – no a on
ho samorejme nepozná.</p>

<p>Používateľ potom môže len požiadať o obnovu hesla a skúsiť to
celé znova.</p>

<p>Možnosť vypnúť potrebu zadávať Aktuálne heslo by bola podľa mňa na
mieste. Do jadra Drupalu 7 bol tento prvok zavedený (<a
href="http://drupal.org/node/86299">http://drupal.org/node/86299</a>) kvôli
bezpečnosti, no povedal by som, že nebol celkom dotiahnutý do konca.</p>

<p>Jediný mne známy spôsob ako zrušiť povinnosť zadávať Aktuálne heslo
je cez vlastný mini modul. Využitím hook_form_FOR­M_ID_alter je možné
zrušiť položky pre Aktuálne heslo z formulára. Aj keď podľa všetkého
to funguje – rozhodne za nič neručím . )</p>

<p><code>/**<br />
* Implements hook_form_FOR­M_ID_alter().<br />
*/<br />
<br />
function mymodule_form_u­ser_profile_for­m_alter(&amp;$for­m, $form_state) {
 <br />
 unset($form[‚ac­count‘][‚curren­t_pass_required_va­lues‘]);<br />
 unset($form[‚ac­count‘][‚curren­t_pass‘]);<br />
 unset($form[‚#va­lidate‘][1]);  <br />
 }</code></p>

<p>Celý kód modulu v prílohe.</p>

<p>Čo si o tom myslíte?</p>

<!-- by Texy2! --><table id="attachments" class="sticky-enabled">
 <thead><tr><th>Príloha</th><th>Veľkosť</th> </tr></thead>
<tbody>
 <tr class="odd"><td><a href="http://drupal.sk/files/mymodule.zip">mymodule.zip</a></td><td>633 bajtov</td> </tr>
</tbody>
</table>
  </div>
  
  <ul class="links inline"><li class="blog_usernames_blog first"><a href="../../blog/568/index.html" title="Read borgo&#039;s latest blog entries.">Blog používateľa borgo</a></li>
<li class="comment_forbidden last"></li>
</ul></div>
        
      </div>

              <div id="sidebar">
          <div id="block-block-9" class="block block-block odd">
  <h3>Drupal SK na Facebooku</h3>

  <div class="content">
    <p><iframe src="http://www.facebook.com/plugins/likebox.php?href=https%3A%2F%2Fwww.facebook.com%2FDrupalSlovensko&amp;width=300&amp;height=558&amp;colorscheme=light&amp;show_faces=true&amp;border_color&amp;stream=true&amp;header=false&amp;appId=172291972850481" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:300px; height:558px;" allowTransparency="true"></iframe></p>
  </div>
</div>
<div id="block-views-latest_topics-block_1" class="block block-views even">
  <h3>Nové témy vo fóre</h3>

  <div class="content">
    <div class="view view-latest-topics view-id-latest_topics view-display-id-block_1 view-dom-id-1">
    
  
  
      <div class="view-content">
      <div class="item-list">
    <ul>
          <li class="views-row views-row-1 views-row-odd views-row-first">  
  <div class="views-field-title">
                <span class="field-content"><a href="../2386/index.html">Problem s funkcnostou stranky</a></span>
  </div>
  
  <div class="views-field-changed">
                <span class="field-content">3 týždne 2 dni</span>
  </div>
</li>
          <li class="views-row views-row-2 views-row-even">  
  <div class="views-field-title">
                <span class="field-content"><a href="../2376/index.html">Aplikácia podobný k moodlu</a></span>
  </div>
  
  <div class="views-field-changed">
                <span class="field-content">4 týždne 2 dni</span>
  </div>
</li>
          <li class="views-row views-row-3 views-row-odd">  
  <div class="views-field-title">
                <span class="field-content"><a href="../2366/index.html">Hľadáme drupal programátora</a></span>
  </div>
  
  <div class="views-field-changed">
                <span class="field-content">6 týždňov 1 deň</span>
  </div>
</li>
          <li class="views-row views-row-4 views-row-even">  
  <div class="views-field-title">
                <span class="field-content"><a href="../2361/index.html">Validácia prekladov</a></span>
  </div>
  
  <div class="views-field-changed">
                <span class="field-content">7 týždňov 1 deň</span>
  </div>
</li>
          <li class="views-row views-row-5 views-row-odd">  
  <div class="views-field-title">
                <span class="field-content"><a href="../2356/index.html">drupal.sk</a></span>
  </div>
  
  <div class="views-field-changed">
                <span class="field-content">7 týždňov 3 dni</span>
  </div>
</li>
          <li class="views-row views-row-6 views-row-even">  
  <div class="views-field-title">
                <span class="field-content"><a href="../2351/index.html">Obstarávanie webovej verzie Encyklopédie Beliana</a></span>
  </div>
  
  <div class="views-field-changed">
                <span class="field-content">10 týždňov 5 dní</span>
  </div>
</li>
          <li class="views-row views-row-7 views-row-odd">  
  <div class="views-field-title">
                <span class="field-content"><a href="../2346/index.html">Views</a></span>
  </div>
  
  <div class="views-field-changed">
                <span class="field-content">11 týždňov 8 hod</span>
  </div>
</li>
          <li class="views-row views-row-8 views-row-even">  
  <div class="views-field-title">
                <span class="field-content"><a href="../2341/index.html">Stránka v novom okne</a></span>
  </div>
  
  <div class="views-field-changed">
                <span class="field-content">24 týždňov 1 deň</span>
  </div>
</li>
          <li class="views-row views-row-9 views-row-odd">  
  <div class="views-field-title">
                <span class="field-content"><a href="../2336/index.html">b2b a drupal/ubercart</a></span>
  </div>
  
  <div class="views-field-changed">
                <span class="field-content">27 týždňov 2 dni</span>
  </div>
</li>
          <li class="views-row views-row-10 views-row-even views-row-last">  
  <div class="views-field-title">
                <span class="field-content"><a href="../2331/index.html">Bezpecnost sprav - Drupal 8</a></span>
  </div>
  
  <div class="views-field-changed">
                <span class="field-content">29 týždňov 2 dni</span>
  </div>
</li>
      </ul>
</div>    </div>
  
  
  
  
  
  
</div>   </div>
</div>
<div id="block-views-latest_comments-block_1" class="block block-views odd">
  <h3>Posledné komentáre</h3>

  <div class="content">
    <div class="view view-latest-comments view-id-latest_comments view-display-id-block_1 view-dom-id-2">
    
  
  
      <div class="view-content">
      <div class="item-list">
    <ul>
          <li class="views-row views-row-1 views-row-odd views-row-first">  
  <div class="views-field-title">
          <label class="views-label-title">
        Ad:
      </label>
                <span class="field-content"><a href="../2411/index.html">Zhodnotenie roku 2016 a plány na rok 2017</a></span>
  </div>
  
  <span class="views-field-name">
                <span class="field-content"><a href="../../user/239/index.html" title="Zobraziť profil používateľa">frankye</a></span>
  </span>
  
  <span class="views-field-timestamp">
          <label class="views-label-timestamp">
        pred:
      </label>
                <span class="field-content">1 deň 9 hod</span>
  </span>
</li>
          <li class="views-row views-row-2 views-row-even">  
  <div class="views-field-title">
          <label class="views-label-title">
        Ad:
      </label>
                <span class="field-content"><a href="../2356/index.html">drupal.sk</a></span>
  </div>
  
  <span class="views-field-name">
                <span class="field-content">Anonymous</span>
  </span>
  
  <span class="views-field-timestamp">
          <label class="views-label-timestamp">
        pred:
      </label>
                <span class="field-content">1 týždeň 1 deň</span>
  </span>
</li>
          <li class="views-row views-row-3 views-row-odd">  
  <div class="views-field-title">
          <label class="views-label-title">
        Ad:
      </label>
                <span class="field-content"><a href="../72/index.html">Preklad Drupal 4.7.0</a></span>
  </div>
  
  <span class="views-field-name">
                <span class="field-content"><a href="../../user/137/index.html" title="Zobraziť profil používateľa">kubrob</a></span>
  </span>
  
  <span class="views-field-timestamp">
          <label class="views-label-timestamp">
        pred:
      </label>
                <span class="field-content">1 týždeň 4 dni</span>
  </span>
</li>
          <li class="views-row views-row-4 views-row-even">  
  <div class="views-field-title">
          <label class="views-label-title">
        Ad:
      </label>
                <span class="field-content"><a href="../219/index.html">Realitna kancelaria</a></span>
  </div>
  
  <span class="views-field-name">
                <span class="field-content"><a href="../../user/137/index.html" title="Zobraziť profil používateľa">kubrob</a></span>
  </span>
  
  <span class="views-field-timestamp">
          <label class="views-label-timestamp">
        pred:
      </label>
                <span class="field-content">1 týždeň 4 dni</span>
  </span>
</li>
          <li class="views-row views-row-5 views-row-odd">  
  <div class="views-field-title">
          <label class="views-label-title">
        Ad:
      </label>
                <span class="field-content"><a href="../2386/index.html">Problem s funkcnostou stranky</a></span>
  </div>
  
  <span class="views-field-name">
                <span class="field-content"><a href="../../user/2542/index.html" title="Zobraziť profil používateľa">mirom</a></span>
  </span>
  
  <span class="views-field-timestamp">
          <label class="views-label-timestamp">
        pred:
      </label>
                <span class="field-content">3 týždne 1 deň</span>
  </span>
</li>
          <li class="views-row views-row-6 views-row-even">  
  <div class="views-field-title">
          <label class="views-label-title">
        Ad:
      </label>
                <span class="field-content"><a href="../2376/index.html">Aplikácia podobný k moodlu</a></span>
  </div>
  
  <span class="views-field-name">
                <span class="field-content"><a href="../../user/2542/index.html" title="Zobraziť profil používateľa">mirom</a></span>
  </span>
  
  <span class="views-field-timestamp">
          <label class="views-label-timestamp">
        pred:
      </label>
                <span class="field-content">4 týždne 2 dni</span>
  </span>
</li>
          <li class="views-row views-row-7 views-row-odd">  
  <div class="views-field-title">
          <label class="views-label-title">
        Ad:
      </label>
                <span class="field-content"><a href="../2356/index.html">drupal.sk</a></span>
  </div>
  
  <span class="views-field-name">
                <span class="field-content"><a href="../../user/2756/index.html" title="Zobraziť profil používateľa">EdizonTN</a></span>
  </span>
  
  <span class="views-field-timestamp">
          <label class="views-label-timestamp">
        pred:
      </label>
                <span class="field-content">6 týždňov 1 deň</span>
  </span>
</li>
          <li class="views-row views-row-8 views-row-even views-row-last">  
  <div class="views-field-title">
          <label class="views-label-title">
        Ad:
      </label>
                <span class="field-content"><a href="../2356/index.html">drupal.sk</a></span>
  </div>
  
  <span class="views-field-name">
                <span class="field-content"><a href="../../user/2756/index.html" title="Zobraziť profil používateľa">EdizonTN</a></span>
  </span>
  
  <span class="views-field-timestamp">
          <label class="views-label-timestamp">
        pred:
      </label>
                <span class="field-content">6 týždňov 1 deň</span>
  </span>
</li>
      </ul>
</div>    </div>
  
  
  
  
  
  
</div>   </div>
</div>
<div id="block-views-Najnovsie-block_4" class="block block-views even">
  <h3>Najnovšie v blogoch</h3>

  <div class="content">
    <div class="view view-Najnovsie view-id-Najnovsie view-display-id-block_4 view-dom-id-3">
    
  
  
      <div class="view-content">
      <div class="item-list">
    <ul>
          <li class="views-row views-row-1 views-row-odd views-row-first">  
  <div class="views-field-title">
                <span class="field-content"><a href="../2411/index.html">Zhodnotenie roku 2016 a plány na rok 2017</a></span>
  </div>
  
  <div class="views-field-created">
                <span class="field-content">3 dni 17 hod</span>
  </div>
</li>
          <li class="views-row views-row-2 views-row-even">  
  <div class="views-field-title">
                <span class="field-content"><a href="../2296/index.html">RESTful Drupal 8 - meetup - 14.4.2016</a></span>
  </div>
  
  <div class="views-field-created">
                <span class="field-content">38 týždňov 2 dni</span>
  </div>
</li>
          <li class="views-row views-row-3 views-row-odd">  
  <div class="views-field-title">
                <span class="field-content"><a href="../2256/index.html">Prvý kontakt s Drupalom (Workshop: Základy Drupal 8)</a></span>
  </div>
  
  <div class="views-field-created">
                <span class="field-content">47 týždňov 3 dni</span>
  </div>
</li>
          <li class="views-row views-row-4 views-row-even">  
  <div class="views-field-title">
                <span class="field-content"><a href="../2196/index.html">PF 2016</a></span>
  </div>
  
  <div class="views-field-created">
                <span class="field-content">1 rok 6 dní</span>
  </div>
</li>
          <li class="views-row views-row-5 views-row-odd views-row-last">  
  <div class="views-field-title">
                <span class="field-content"><a href="../2181/index.html">Pripravované akcie v novembri</a></span>
  </div>
  
  <div class="views-field-created">
                <span class="field-content">1 rok 8 týždňov</span>
  </div>
</li>
      </ul>
</div>    </div>
  
  
  
  
  
  
</div>   </div>
</div>
        </div>
      
          </div>

    <div id="footer-region" class="clearfloat">
      <div id="footer-left" class="clearfloat">
              </div> 		

      <div id="footer-middle" class="clearfloat">
              </div>

      <div id="footer-right" class="clearfloat">
              </div>
    </div>

    <div id="footer-message">
      2005 - 2011 Drupal.sk | Drupal is a <a href="http://drupal.com/copyright">registered trademark</a> of <a href="http://buytaert.net/">Dries Buytaert</a>. | <a href="http://drupal.org/project/arthemia">Arthemia</a> is based on the original design by <a href="http://michaelhutagalung.com/">Michael Hutagalung</a>.    </div>
      </body>

<!-- Mirrored from www.drupal.sk/node/984 by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 05 Jan 2017 18:32:14 GMT -->
</html>